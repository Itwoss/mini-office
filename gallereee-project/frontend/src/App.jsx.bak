import React, { useEffect, useState } from "react";
import "./App.css";

// If you already wired a backend, keep this import.
// The code will gracefully fall back to mock data if the API fails.
let galleryAPI;
try {
  // optional ‚Äì only if you created src/services/api.js
  // eslint-disable-next-line global-require, import/no-unresolved
  galleryAPI = require("./services/api").galleryAPI;
} catch (_) {}

const MOCK = [
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 1,
    title: "Framer Studio",
    image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 2,
    title: "Parabol",
    image: "https://images.unsplash.com/photo-1529336953121-a0ce0a5a2fda?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 3,
    title: "Feature",
    image: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 4,
    title: "Biograph",
    image: "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 5,
    title: "mishmash",
    image: "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1600&auto=format&fit=crop",
  },
  {
    id: 6,
    title: "A Symphony of Being",
    image: "https://images.unsplash.com/photo-1517242022123-6c4f0d6d3a19?q=80&w=1600&auto=format&fit=crop",
  },
];

export default function App() {
  const [galleries, setGalleries] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    (async () => {
      if (!galleryAPI) {
        setGalleries(MOCK);
        setLoading(false);
        return;
      }
      try {
        const res = await galleryAPI.getGalleries();
        const data = Array.isArray(res?.data) ? res.data : [];
        setGalleries(data.length ? data : MOCK);
      } catch {
        setGalleries(MOCK);
      } finally {
        setLoading(false);
      }
    })();
  }, []);

  return (
    <div className="layout">
      {/* Sidebar */}
      <aside className="sidebar">
        <div className="brand">Gallereee</div>

        <nav className="side-nav">
          <a className="nav-item active">
            <span className="icon">üè†</span>
            <span>Home</span>
          </a>
          <a className="nav-item">
            <span className="icon">üì∞</span>
            <span>Articles</span>
          </a>
          <a className="nav-item">
            <span className="icon">‚úâÔ∏è</span>
            <span>Contact</span>
          </a>
          <a className="nav-item">
            <span className="icon">üì§</span>
            <span>Submit</span>
          </a>
        </nav>

        <div className="cats-label">Categories</div>
        <ul className="cats">
          <li><a><span className="dot" />Websites</a></li>
          <li><a><span className="dot" />Templates</a></li>
          <li><a><span className="dot" />Resources</a></li>
          <li><a><span className="dot" />Plugins</a></li>
          <li><a><span className="dot" />Courses</a></li>
        </ul>

        <div className="sidebar-fade" />
      </aside>

      {/* Main */}
      <main className="main">
        <div className="noise" />
        <section className="section">
          <header className="section-head">
            <h2>Latest</h2>
          </header>

          {loading ? (
            <div className="loading">Loading‚Ä¶</div>
          ) : (
            <div className="grid">
              {galleries.map((g) => (
                <article key={g.id} className="card">
                  <div className="frame">
                    <img src={g.image} alt={g.title} loading="lazy" />
                    <div className="frame-border" />
                  </div>
                  <h3 className="title">{g.title}</h3>
                </article>
              ))}
            </div>
          )}
        </section>
      </main>
    </div>
  );
}



import React from "react";
import { Routes, Route, Navigate, Link } from "react-router-dom";
import { useAuth } from "./contexts/AuthContext";
import Home from "./pages/Home.jsx";
import Login from "./pages/Login.jsx";
import Register from "./pages/Register.jsx";
import Profile from "./pages/Profile.jsx";
import Messages from "./pages/Messages.jsx";
import Sidebar from "./components/Sidebar.jsx";
import "./App.css";

function Protected({ children }) {
  const { user, ready } = useAuth();
  if (!ready) return null;
  return user ? children : <Navigate to="/login" replace />;
}

function Landing() {
  const { user } = useAuth();
  return (
    <div className="landing">
      <h1>My Office</h1>
      <p>Welcome to your mini office. Click below to enter.</p>
      <Link className="btn primary" to={user ? "/home" : "/login"}>Enter</Link>
    </div>
  );
}

export default function App() {
  return (
    <div className="layout">
      <Sidebar />
      <main className="main">
        <div className="noise" />
        <Routes>
          <Route path="/" element={<Landing />} />
          <Route path="/login" element={<Login />} />
          <Route path="/register" element={<Register />} />
          <Route path="/home" element={<Protected><Home /></Protected>} />
          <Route path="/profile/:id" element={<Protected><Profile /></Protected>} />
          <Route path="/messages" element={<Protected><Messages /></Protected>} />
          <Route path="*" element={<Navigate to="/" />} />
        </Routes>
      </main>
    </div>
  );
}
